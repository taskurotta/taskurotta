<div page-header="Notification subscriptions" ng-dblclick="$debug = !$debug">
    <div ng-if="$debug">
        <h6>{{ formParams }}</h6>
    </div>
</div>

<page-message></page-message>

<div class="well">

    <list-reload model="subscriptionsResource">
        <div style="float:right">
            <a ui-sref="subscription_create" class="btn btn-small" popover="Add subscription" popover-trigger="mouseenter">
                <i class="icon-plus"></i>
            </a>
        </div>
    </list-reload>

    <table class="table table-striped table-bordered table-hover table-items">
        <thead>
        <tr>
            <th style="width: 50px">â„–</th>
            <th>Emails</th>
            <th>Actors</th>
            <th>Actions</th>
        </tr>
        </thead>

        <tbody>
        <tr ng-repeat="subscription in subscriptionsModel.items">
            <td>
                {{ subscriptionsModel.$startIndex + $index }}
            </td>
            <td>
                <a ui-sref="subscription({id:subscription.id})" class="btn-link">{{ subscription.emails | json }}</a>
            </td>
            <td>
                {{ subscription.actorIds | json }}
            </td>
            <td>
                <a class="btn btn-small" ng-click="delete(subscription.id)" popover="Delete subscription" popover-trigger="mouseenter"><i class="icon-trash"></i></a>
            </td>
        </tr>
        </tbody>

        <tfoot>
        <tr>
            <td colspan="7">
                <list-paginator model="subscriptionsModel">
                    <span ng-if="total" class="muted">
                        Total subscriptions: <b>{{ total }}</b>
                    </span>
                </list-paginator>
            </td>
        </tr>
        </tfoot>
    </table>

    <table width="100%" cellspacing="0" cellpadding="0">
        <tr>
            <td>
                <div>Total: <b>{{subscriptionsModel.totalCount || subscriptionsModel.items.length}}</b> subscriptions</div>
            </td>
            <td style="text-align: right">
                <span ng-if="serverTime" class="muted">
                    Server time: <b>{{ serverTime | dateTime }}</b>
                </span>
            </td>
        </tr>
    </table>

</div>
